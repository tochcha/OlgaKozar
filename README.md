# Gulp - быстрый старт
Сборка gulp от компании mostbest.ru. Автор: Чернов Алексей

# Используемые технологии
_Для работы требуется установка [Node.js](https://nodejs.org/en/), [Git](https://git-scm.com/)_

# Подготовка рабочей области
Создаем репозиторий проекта на локальном сервере и копируем файлы сборщика проекта.  
1. Открываем окно команд **shift + левая кнопка мыши** из папки проекта.
1. В открывшемся окне пишим команду **npm i -g gulp npm-check-updates** - установка gulp и систему контроля актуальных версий (глобально).
1. Запускаем проверку актуальности версий пакетов описаных в **package.json** командой **ncu**.
1. При наличии устаревших версий пакетов обновляем их командой **ncu u**.
1. **npm i** - устанавливаем все пактеты перечисленные в **package.json**.
1. **npm init -f** - стартовая команда для создание файла **package.json**. В него будет записаваться информация об установленных пакетах. Ключ **-f** означает "тихую" установку.  
1. **npm i gulp -D** - устанавливаем пакет gulp локально.

1. **Копируем/создаем структуру каталогов** - основными делаем дериктивы **src** и **build**.  
6.1 **src** - дериктива разработки.  
6.1.1 **src -> fonts** - папка шрифтов проекта. Шрифты желательно подгружать из [google репозитория](https://fonts.google.com/).  Если есть необходимость разместить шрифты локально, то они переносяться в папку рабочего проекта без изменений.  
6.1.2 **src -> sass** - стилевая папка проекта. Использовать scss синтаксис.  
6.1.3 **src -> sass -> index.scss** - родительский файл описывающий связи.  
6.1.4 **src -> sass -> includes** - общая директория scss файлов.  
6.1.5 **src -> sass -> includes -> system** - директория системных scss файлов.  
6.1.6 **src -> sass -> includes -> system -> variables.sass** - файл системных переменых.  
6.1.7 **src -> sass -> includes -> system -> fonts.sass** - файл подключения шрифтов.   
6.1.8 **src -> js** - javascript директория. Использовать ECMAScript 6.  
6.1.9 **src -> img** - директория визуального оформления.  
6.1.10 **src -> template** - директория html разметки. Использовать html предпроцессор pug. Документация по установки [pug](https://github.com/MostBest/gulp_pug).  
6.1.11 **src -> template -> index.pug** - родительский файл описывающий **HTML** связи.
6.1.12 **src -> template -> includes** - общая директория **HTML** файлов. 
6.2 **build** - дериктива скомпелированных файлов. 
1. **Создаем файл gulpfile.js** - файл с инструкциями для gulp.


## Сборка HTML
**gulp-pug** (gulp-jade) - HTML препроцессор/шаблонизатор. Имеет возможность дробить код на мелкие независимые части с возможностью последующего подключения. [Официальный сайт](https://pugjs.org/api/getting-started.html). Русская документация по [pug](https://habrahabr.ru/post/278109/).

## Структура директории HTML сборки
```
src - директория для оригинальных/исходных файлов проекта; 
--template - директория pug шаблонов;
----includes - директория подключаемых pug файлов;
----index.pug - исходный pug файл.  
```

## Установка
```
$ npm i gulp-pug -D
```

## Подключение в gulpfile.js
```
const gulp = require('gulp');
const pug = require('gulp-pug');

gulp.task('views', function() {
  return gulp.src(path.src.html)
  .pipe(pug({
    pretty: true
  }))
  .pipe(gulp.dest(path.build.html));
});
```

## Сборка CSS
**gulp-sass** - CSS препроцессор/шаблонизатор. Возможная альтернатива [gulp-stylus](http://stylus-lang.com/). 
**gulp-cssnano** - CSS компрессор. [Официальный сайт](http://cssnano.co/).
**gulp-autoprefixer** - автоматическое добавление вендорных префиксов. 

## Сборка JS
**gulp-uglify** - JavaScript компрессор. 
**gulp-concat** - объединение JavaScript файлов. 

## Оптимизация изображений
**gulp-imagemin** - компрессор изображений. 
**imagemin-pngquant** - PNG плагин для gulp-imagemin.
**gulp.spritesmith** - объединяет изображения в спрайты, формирует вызов из CSS.
**gulp-cache** - формирует кэш из временных файлов. Необходим для оптимизации работы с изображениями. 

## Оптимизация SVG изображений
**gulp-svgmin** - минификация SVG/SVGO.
**gulp-svg-spritesheet** - объединяет SVG изображения в спрайты, формирует вызов из CSS.

## Автоматическая перезагрузка страницы браузера
**browser-sync** - сервер, перезагрузка страницы при внесении изменений. Возможная альтернатива [gulp-livereload](https://www.npmjs.com/package/livereload).

## Вспомогательные плагины
**gulp-rename** - переименование файлов.
**del** - очистка выбранной директории. 
**gulp-rigger** - подключает содержимое одного файла в тело другого. 
